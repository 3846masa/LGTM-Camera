/**
 * Modules in this bundle
 * @license
 *
 * lgtm-camera-on-web:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: 3846masa
 *   version: 0.1.0
 *
 * vueify:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Evan You
 *   maintainers: yyx990803 <yyx990803@gmail.com>
 *   homepage: https://github.com/vuejs/vueify
 *   version: 9.2.4
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var inserted = exports.cache = {}

function noop () {}

exports.insert = function (css) {
  if (inserted[css]) return noop
  inserted[css] = true

  var elem = document.createElement('style')
  elem.setAttribute('type', 'text/css')

  if ('textContent' in elem) {
    elem.textContent = css
  } else {
    elem.styleSheet.cssText = css
  }

  document.getElementsByTagName('head')[0].appendChild(elem)
  return function () {
    document.getElementsByTagName('head')[0].removeChild(elem)
    inserted[css] = false
  }
}

},{}],2:[function(require,module,exports){
(function (global){
var __vueify_style_dispose__ = require("vueify/lib/insert-css").insert(".root,body,html{width:100vw;height:100vh;background:#000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.root__videoContainer{position:relative;width:100vw;height:100vw;margin:auto;overflow:hidden}.root__videoContainer>img,.root__videoContainer>video{display:inline-block;min-width:100%;min-height:100%;position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.root__overlayText{position:absolute;display:inline-block;width:100%;text-align:center;white-space:nowrap;margin:0;color:#fff;font-weight:700}.root__overlayText[type=normal]{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.root__overlayText[type=godzilla]{bottom:0;left:0;-webkit-transform:scaleX(.85);transform:scaleX(.85);letter-spacing:-.03em}.root__videoPreview>progress{position:absolute;display:inline-block;width:80%;height:2vh;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin:0;color:#fff;font-size:25vw;font-weight:700}.root__download{width:100%;height:auto;box-sizing:border-box;padding:0 10px}.root__controller{width:100vw;height:calc(100vh - 100vw - 32px);box-sizing:border-box;overflow:hidden;padding:5vw}.root__captureButton{max-width:100%;max-height:100%}")
;(function(){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _recordrtc=(typeof window !== "undefined" ? window['RecordRTC'] : typeof global !== "undefined" ? global['RecordRTC'] : null),_recordrtc2=_interopRequireDefault(_recordrtc),_gifshot=(typeof window !== "undefined" ? window['gifshot'] : typeof global !== "undefined" ? global['gifshot'] : null),_gifshot2=_interopRequireDefault(_gifshot),_fileSaver=(typeof window !== "undefined" ? window['saveAs'] : typeof global !== "undefined" ? global['saveAs'] : null),_fileSaver2=_interopRequireDefault(_fileSaver),_lodash=(typeof window !== "undefined" ? window['_']['debounce'] : typeof global !== "undefined" ? global['_']['debounce'] : null),_lodash2=_interopRequireDefault(_lodash),_eastasianwidth=(typeof window !== "undefined" ? window['eastasianwidth'] : typeof global !== "undefined" ? global['eastasianwidth'] : null),_eastasianwidth2=_interopRequireDefault(_eastasianwidth),_CaptureButton=require('./CaptureButton.vue'),_CaptureButton2=_interopRequireDefault(_CaptureButton);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const STATUS={INIT:0,STOP:1,RECORDING:2,GENERATING:3,GENERATED:4};exports.default={data:()=>({stream:null,recordRTC:null,recorded:null,gifImage:null,status:STATUS.INIT,progress:0,recTime:0,recStartDate:null,devices:[],text:'LGTM',overlayTextType:'normal',constraints:{audio:!1,video:!0},recordRTCOptions:{mimeType:'video/mp4',type:'video',numWorkers:2},styles:{root__overlayText:{fontSize:''}},STATUS}),computed:{},watch:{stream(a){this.$refs.video.srcObject=a,this.recordRTC=new _recordrtc2.default(a,this.recordRTCOptions)},text(){this.fitOverlayText(),this.reloadFont()},overlayTextType(){this.reloadFont()}},mounted(){this.initStream(),this.initCanvasPatch(),this.fitOverlayText()},methods:{initStream(){navigator.mediaDevices.enumerateDevices().then(a=>{this.devices=a.filter(c=>'videoinput'===c.kind);const b=this.devices.find(c=>c.label.toLowerCase().includes('back'));this.constraints.video=!b||{deviceId:{exact:b.deviceId}},navigator.mediaDevices.getUserMedia(this.constraints).then(this.initStreamSuccessHandler.bind(this)).catch(this.initStreamErrorHandler.bind(this))})},initCanvasPatch(){const a=CanvasRenderingContext2D.prototype.fillText,b=this;CanvasRenderingContext2D.prototype.fillText=function(e,f,g){if('godzilla'===b.overlayTextType){this.canvas.style['letter-spacing']='-0.03em';const h=b.$refs.overlayText.querySelector('span').getBoundingClientRect().width,i=300*h/window.innerWidth;a.call(this,e,f,g,i)}else a.call(this,e,f,g)}},initStreamSuccessHandler(a){this.stream=a,this.status=STATUS.STOP;const b=a.getVideoTracks();console.log(b)},initStreamErrorHandler(a){'ConstraintNotSatisfiedError'===a.name?console.error(`The resolution ${this.constraints.video.width.exact} x ${this.constraints.video.width.exact} px is not supported by your device.`):'PermissionDeniedError'===a.name&&console.error('Permissions have not been granted to use your camera and microphone, you need to allow the page access to your devices in order for the demo to work.'),console.error(`getUserMedia error: ${a.name}`,a)},startRecord(){this.status===STATUS.STOP&&(this.status=STATUS.RECORDING,this.recordRTC.startRecording(),this.recStartDate=new Date,this.updateRecTime())},stopRecord(){this.status===STATUS.RECORDING&&(this.status=STATUS.GENERATING,this.progress=0,this.recordRTC.stopRecording(a=>{this.recorded=a,this.playPreview(),this.createGif()}))},playPreview(){const a=Math.floor(this.recTime),b=4>=a?1:2;this.$refs.recorded.src=this.recorded,this.$refs.recorded.playbackRate=b},updateRecTime(){this.status===STATUS.RECORDING&&(this.recTime=(new Date-this.recStartDate)/1000,10<this.recTime&&this.stopRecord(),requestAnimationFrame(this.updateRecTime.bind(this)))},createGif(){console.log('Creating Gif...');const a=this.recTime,b=4>=a?0.1:0.2,c=window.getComputedStyle(this.$refs.overlayText),e=`${300*parseFloat(c.fontSize)/window.innerWidth}px`;_gifshot2.default.createGIF({video:[this.recorded],interval:b,numFrames:Math.floor(a/b),gifWidth:300,gifHeight:300,text:this.text,fontFamily:c.fontFamily,fontWeight:c.fontWeight,fontSize:e,textAlign:'center',textBaseline:'normal'===this.overlayTextType?'middle':'bottom',textYCoordinate:'normal'===this.overlayTextType?150:null,progressCallback:f=>{this.progress=f}},f=>{f.error?console.error(f.error):(this.gifImage=f.image,this.status=STATUS.GENERATED)})},reset(){location.reload()},toggleType(){const a=this.overlayTextType;this.overlayTextType='normal'===a?'godzilla':'normal'},downloadGif(){fetch(this.gifImage).then(a=>a.blob()).then(a=>(0,_fileSaver2.default)(a,`${this.text}.gif`))},fitOverlayText(){const a='normal'===this.type?_eastasianwidth2.default.length(this.text)/2:this.text.length;this.styles.root__overlayText.fontSize=`calc(90vw / ${a})`},reloadFont:(0,_lodash2.default)(function(){'godzilla'===this.overlayTextType&&this.$refs.japont.reload()},1000),blur(a){a.target.blur()}},components:{CaptureButton:_CaptureButton2.default}};
})()
if (module.exports.__esModule) module.exports = module.exports.default
var __vue__options__ = (typeof module.exports === "function"? module.exports.options: module.exports)
__vue__options__.render = function(){with(this){return _h('div',{staticClass:"root"},[_h('div',{directives:[{name:"show",value:(status === STATUS.STOP || status === STATUS.RECORDING),expression:"status === STATUS.STOP || status === STATUS.RECORDING"}],staticClass:"root__videoContainer root__videoPreview"},[_h('video',{ref:"video",attrs:{"muted":"muted","autoplay":"autoplay"}}),_h('p',{ref:"overlayText",staticClass:"root__overlayText",style:(styles.root__overlayText),attrs:{"type":overlayTextType}},[_h('span',[_s(text)])])]),_h('div',{directives:[{name:"show",value:(status === STATUS.GENERATING),expression:"status === STATUS.GENERATING"}],staticClass:"root__videoContainer root__videoPreview"},[_h('video',{ref:"recorded",attrs:{"loop":"loop","muted":"muted","autoplay":"autoplay"}}),_h('p',{ref:"overlayText",staticClass:"root__overlayText",style:(styles.root__overlayText),attrs:{"type":overlayTextType}},[_h('span',[_s(text)])]),_h('progress',{staticClass:"progress is-info",attrs:{"max":"11"},domProps:{"value":progress * 10}})]),_h('div',{directives:[{name:"show",value:(status === STATUS.GENERATED),expression:"status === STATUS.GENERATED"}],staticClass:"root__videoContainer"},[_h('img',{ref:"gifImage",attrs:{"src":gifImage}})]),_h('div',{staticClass:"root__download columns is-gapless is-flex is-marginless"},[_h('div',{staticClass:"column is-3-mobile is-flex has-text-left"},[_h('button',{staticClass:"button is-outlined is-danger",on:{"click":reset}},["RESET"])]),_h('div',{staticClass:"column is-1-mobile is-flex"},[_h('button',{staticClass:"button"},[_h('i',{staticClass:"fa",class:{          'fa-thumbs-o-up': overlayTextType === 'normal',          'fa-warning': overlayTextType === 'godzilla',        },on:{"click":toggleType}})])]),_h('div',{staticClass:"column is-4-mobile is-flex"},[_h('input',{directives:[{name:"model",value:(text),expression:"text"}],staticClass:"input",attrs:{"placeholder":"LGTM","disabled":status !== STATUS.STOP},domProps:{"value":_s(text)},on:{"keyup":function($event){if($event.keyCode!==13)return;blur($event)},"input":function($event){if($event.target.composing)return;text=$event.target.value}}})]),_m(0),_h('div',{staticClass:"column is-3-mobile is-flex has-text-right"},[_h('button',{staticClass:"button is-outlined is-primary",attrs:{"disabled":status !== STATUS.GENERATED},on:{"click":downloadGif}},["DOWNLOAD"])])]),_h('div',{staticClass:"root__controller"},[_h('capture-button',{staticClass:"root__captureButton",attrs:{"time":recTime},on:{"start":startRecord,"stop":stopRecord}})]),_h('japont-config',{ref:"japont",attrs:{"src":"ipaex/ipaex-mincho.woff","selector":".root__overlayText[type='godzilla']","alias":"IPAexMincho"}})])}}
__vue__options__.staticRenderFns = [function(){with(this){return _h('div',{staticClass:"column is-1-mobile is-flex"})}}]

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./CaptureButton.vue":3,"vueify/lib/insert-css":1}],3:[function(require,module,exports){
;(function(){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});exports.default={data:()=>({strokeWidth:10}),props:['time'],computed:{radius(){return 50-this.strokeWidth/2},circumference(){return 2*this.radius*Math.PI}},mounted(){},methods:{getDashArray(a){const b=(this.time-a)/12*this.circumference;return`${Math.max(b,0)} 1000`},getDashOffset(a){const b=a/12*this.circumference;return-1*b},emit(a){this.$emit(a)}},components:{}};
})()
if (module.exports.__esModule) module.exports = module.exports.default
var __vue__options__ = (typeof module.exports === "function"? module.exports.options: module.exports)
__vue__options__.render = function(){with(this){return _h('svg',{attrs:{"viewBox":"0 0 100 100","style":"transform: rotate(-90deg)"},on:{"touchstart":function($event){$event.preventDefault();emit('start')},"touchend":function($event){$event.preventDefault();emit('stop')}}},[_h('circle',{staticClass:"captureButton__bg",attrs:{"cx":"50","cy":"50","r":radius,"fill":"white","stroke":"#BDBDBD","stroke-width":strokeWidth}}),_h('circle',{staticClass:"captureButton__limit",attrs:{"cx":"50","cy":"50","r":radius,"fill":"none","stroke":"#616161","stroke-width":strokeWidth,"stroke-dasharray":(10 / 12) * circumference,"stroke-dashoffset":"0"}}),_h('circle',{staticClass:"captureButton__loop",attrs:{"cx":"50","cy":"50","r":radius,"fill":"none","stroke":"#FFC107","stroke-width":strokeWidth,"stroke-dasharray":getDashArray(0),"stroke-dashoffset":getDashOffset(0)}}),_h('circle',{staticClass:"captureButton__4sec",attrs:{"cx":"50","cy":"50","r":radius,"fill":"none","stroke":"#4CAF50","stroke-width":strokeWidth,"stroke-dasharray":getDashArray(0.5),"stroke-dashoffset":getDashOffset(0.5)}}),_h('circle',{staticClass:"captureButton__10sec",attrs:{"cx":"50","cy":"50","r":radius,"fill":"none","stroke":"#00BCD4","stroke-width":strokeWidth,"stroke-dasharray":getDashArray(4),"stroke-dashoffset":getDashOffset(4)}}),_h('circle',{staticClass:"captureButton__button",attrs:{"cx":"50","cy":"50","r":radius * 0.75,"fill":"none","stroke":"black","stroke-width":"1"}})])}}
__vue__options__.staticRenderFns = []

},{}],4:[function(require,module,exports){
(function (global){
'use strict';var _vue=(typeof window !== "undefined" ? window['Vue'] : typeof global !== "undefined" ? global['Vue'] : null),_vue2=_interopRequireDefault(_vue),_App=require('./App.vue'),_App2=_interopRequireDefault(_App);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}// Polyfill
// import 'webrtc-adapter';
!1&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&(window.__VUE_DEVTOOLS_GLOBAL_HOOK__.Vue=_vue2.default,_vue2.default.config.devtools=!0),navigator.serviceWorker.register('/serviceworker.js').then(a=>{console.log(a)}).catch(a=>{console.error(a)}),new _vue2.default(_App2.default).$mount('App');

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./App.vue":2}]},{},[4]);
